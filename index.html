<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>tower unite laser projector simulator</title>
    <link rel="stylesheet" href="./style.css">
    <script src="./main.js" type="module"></script>
  </head>
  <body>
    <!-- todo: better screenreader support -->
    <section class="input-info">
      <form class="actions" id="inputActions">
        <label style="border-inline-end: 0;">
          Laser Coordinates
          <select>
            <option name="Rectangular Grid">Rectangular Grid</option>
            <!-- <option>Line Shape</option>
            <option>Plus Shape</option>
            <option>Circle Shape</option>
            <option>Square Shape</option> -->
          </select>
        </label>
        <label class="flex-end">
          Grid Size
          <input type="number" max="20" min="0" value="20" style="width: 5ch;" id="sizeX">
          x
          <input type="number" max="20" min="0" value="20" style="width: 5ch;" id="sizeY">
        </label>
      </form>
    
      <textarea id="projectorInput" class="input" spellcheck="false">
size = 500;

# Plot the tornado points in 3d
sidx = index * 0.15;
spin = sidx + (time / (sidx ^ 1.2)) * 50;
heightRand = (sidx ^ 0.6) * 10 -sin(sidx * 10000) * 8;

xp = cos(spin) * sidx;
yp = heightRand;
zp = sin(spin) * sidx + 500;

xp = xp + sin(sidx/10 + time) * 10;
zp = zp + cos(sidx/10 + time) * 10;


x' = xp;
y' = yp + 100;

z = zp;
x' = x' * size / z;
y' = y' * size / z - 145;

h = -time*100 + fraction*350;
v = 2.5 - z/300;
s = v;
</textarea>    
    </section>
    <div class="output-info" style="flex: 2">
      <form class="actions" id="outputActions">
        <label>
          Run
          <input type="checkbox" id="run" checked>
        </label>
        <label class="flex-1">
          Scale X
          <input class="input-fill" type="range" min="-1" max="1" step="any" value="1" id="scaleX">
        </label>
        <label class="flex-1">
          Scale Y
          <input class="input-fill" type="range" min="-1" max="1" step="any" value="1" id="scaleY">
        </label>
        <label class="flex-1">
          Rotation
          <input class="input-fill" type="range" min="0" max="1" step="any" value="0" id="rotation">
        </label>
        <!-- maybe menu? -->
        <button type="button" class="flex-end" style="flex: 0; flex-basis: 8ch">ðŸ›ˆ Help</button>
      </form>
      <section class="display">
        <canvas id="projectorDisplay" width="1024" height="1024"></canvas>
      </section>
      <output class="outputs ">
        <textarea class="output" id="projectorLogs" spellcheck="false"></textarea>
      </output>  
    </div>
  </body>
</html>
